<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Base de donn√©es - MateZone</title>
	<meta name="description"
		content="D√©couvrez la structure de base de donn√©es MySQL de MateZone, ses tables et relations avec moteur InnoDB.">
	<link rel="stylesheet" href="css/style.css">
	<link rel="icon"
		href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöÄ</text></svg>">
</head>

<body>
	<!-- Navigation -->
	<nav class="navbar">
		<div class="nav-container">
			<a href="index.html" class="logo">MateZone</a>
			<ul class="nav-menu">
				<li><a href="index.html" class="nav-link">Accueil</a></li>
				<li><a href="architecture.html" class="nav-link">Architecture</a></li>
				<li><a href="database.html" class="nav-link active">Base de donn√©es</a></li>
				<li><a href="protocol.html" class="nav-link">Protocole</a></li>
				<li><a href="guide.html" class="nav-link">Guide d'utilisation</a></li>
				<li><a href="documentation.html" class="nav-link">Documentation</a></li>
				<li><a href="contact.html" class="nav-link">Contact</a></li>
			</ul>
			<div class="hamburger">
				<span></span>
				<span></span>
				<span></span>
			</div>
		</div>
	</nav>

	<main>
		<!-- Breadcrumbs -->
		<section class="breadcrumbs">
			<div class="container">
				<ol>
					<li><a href="index.html">Accueil</a></li>
					<li>Base de donn√©es</li>
				</ol>
			</div>
		</section>

		<!-- Header -->
		<section class="hero">
			<div class="container">
				<div class="hero-content">
					<h1>Base de donn√©es MateZone</h1>
					<p>D√©couvrez la structure de donn√©es MySQL qui alimente MateZone, avec moteur InnoDB et encodage
						utf8mb4 pour la performance et la fiabilit√©.</p>
				</div>
			</div>
		</section>

		<!-- Vue d'ensemble -->
		<section class="section">
			<div class="container">
				<div class="section-title">
					<h2>Vue d'ensemble de la base de donn√©es</h2>
					<p>MateZone utilise MySQL pour stocker de mani√®re fiable les utilisateurs, messages et informations
						de session</p>
				</div>

				<div class="grid grid-3">
					<div class="card">
						<span class="card-icon">üë•</span>
						<h3>Gestion des utilisateurs</h3>
						<p>Stockage s√©curis√© des comptes utilisateur avec authentification et profils personnalisables.
						</p>
						<ul style="text-align: left;">
							<li>Identifiants uniques</li>
							<li>Mots de passe s√©curis√©s</li>
							<li>Informations de profil</li>
							<li>Statuts de connexion</li>
						</ul>
					</div>

					<div class="card">
						<span class="card-icon">üí¨</span>
						<h3>Historique des messages</h3>
						<p>Conservation compl√®te de l'historique des conversations avec m√©tadonn√©es d√©taill√©es.</p>
						<ul style="text-align: left;">
							<li>Messages horodat√©s</li>
							<li>Association aux canaux</li>
							<li>Gestion des auteurs</li>
							<li>Persistance des √©changes</li>
						</ul>
					</div>

					<div class="card">
						<span class="card-icon">üè∑Ô∏è</span>
						<h3>Organisation par canaux</h3>
						<p>Structure flexible permettant l'organisation des conversations en diff√©rents espaces
							th√©matiques.</p>
						<ul style="text-align: left;">
							<li>Canaux multiples</li>
							<li>Permissions d'acc√®s</li>
							<li>M√©tadonn√©es de canal</li>
							<li>Gestion des membres</li>
						</ul>
					</div>
				</div>
			</div>
		</section>

		<!-- Configuration de la base de donn√©es -->
		<section class="section section-alt">
			<div class="container">
				<div class="section-title">
					<h2>Configuration et connexion</h2>
					<p>Comment configurer et se connecter √† la base de donn√©es MySQL</p>
				</div>

				<div class="grid grid-2">
					<div class="card">
						<h3>‚öôÔ∏è Configuration requise</h3>
						<div class="table-container">
							<table class="table">
								<tbody>
									<tr>
										<td><strong>SGBD</strong></td>
										<td>MySQL 8.0+</td>
									</tr>
									<tr>
										<td><strong>Encodage</strong></td>
										<td>UTF-8 (utf8mb4)</td>
									</tr>
									<tr>
										<td><strong>Moteur</strong></td>
										<td>InnoDB</td>
									</tr>
									<tr>
										<td><strong>Port par d√©faut</strong></td>
										<td>3306</td>
									</tr>
								</tbody>
							</table>
						</div>

						<div class="alert alert-warning mt-3">
							<strong>S√©curit√© :</strong> Le fichier config.properties contient les identifiants de base
							de donn√©es et ne doit jamais √™tre versionn√©.
						</div>
					</div>

					<div class="card">
						<h3>üîß Fichier de configuration</h3>
						<p>Structure du fichier <code>config.properties</code> :</p>
						<div class="code-block">
							<pre># Configuration de la base de donn√©es
db.url=jdbc:mysql://localhost:3306/matezone
db.username=votre_username
db.password=votre_password

# Param√®tres de connexion
db.maxConnections=10
db.connectionTimeout=30000</pre>
						</div>

						<div class="alert alert-info mt-3">
							<strong>Note :</strong> Copiez config.properties.example vers config.properties et modifiez
							avec vos param√®tres.
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Structure des tables -->
		<section class="section">
			<div class="container">
				<div class="section-title">
					<h2>Structure des tables</h2>
					<p>Structure r√©elle de la base de donn√©es MateZone telle que d√©finie dans le script SQL.</p>
				</div>

				<div class="card mb-4">
					<h3>üñºÔ∏è Table default_images</h3>
					<p>Stocke les images de profil par d√©faut. Une seule copie binaire est conserv√©e par image.</p>
					<div class="table-container">
						<table class="table">
							<thead>
								<tr>
									<th>Champ</th>
									<th>Type</th>
									<th>Contraintes</th>
									<th>Description</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>id</td>
									<td>INT</td>
									<td>PRIMARY KEY, AUTO_INCREMENT</td>
									<td>Identifiant de l'image</td>
								</tr>
								<tr>
									<td>nom</td>
									<td>VARCHAR(50)</td>
									<td>UNIQUE, NOT NULL</td>
									<td>Nom de l'image</td>
								</tr>
								<tr>
									<td>img_data</td>
									<td>MEDIUMBLOB</td>
									<td>NOT NULL</td>
									<td>Donn√©es binaires de l'image</td>
								</tr>
								<tr>
									<td>created_at</td>
									<td>TIMESTAMP</td>
									<td>DEFAULT CURRENT_TIMESTAMP</td>
									<td>Date de cr√©ation de l'enregistrement</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>

				<div class="card mb-4">
					<h3>üë§ Table clients</h3>
					<p>Stocke les comptes utilisateurs, leur mot de passe hash√© et leur image (personnalis√©e ou par
						d√©faut).</p>
					<div class="table-container">
						<table class="table">
							<thead>
								<tr>
									<th>Champ</th>
									<th>Type</th>
									<th>Contraintes</th>
									<th>Description</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>id</td>
									<td>INT</td>
									<td>PRIMARY KEY, AUTO_INCREMENT</td>
									<td>Identifiant unique du client</td>
								</tr>
								<tr>
									<td>pseudo</td>
									<td>VARCHAR(255)</td>
									<td>UNIQUE, NOT NULL</td>
									<td>Pseudo de connexion</td>
								</tr>
								<tr>
									<td>mdp</td>
									<td>VARCHAR(255)</td>
									<td>NOT NULL</td>
									<td>Mot de passe hash√©</td>
								</tr>
								<tr>
									<td>custom_img_data</td>
									<td>MEDIUMBLOB</td>
									<td>NULL</td>
									<td>Image de profil personnalis√©e</td>
								</tr>
								<tr>
									<td>default_image_id</td>
									<td>INT</td>
									<td>DEFAULT 1, FK default_images(id)</td>
									<td>Image de profil par d√©faut associ√©e</td>
								</tr>
								<tr>
									<td>created_at</td>
									<td>TIMESTAMP</td>
									<td>DEFAULT CURRENT_TIMESTAMP</td>
									<td>Date de cr√©ation du compte</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>

				<div class="card mb-4">
					<h3>üè¢ Table groupes</h3>
					<p>G√®re les groupes de discussion cr√©√©s par les clients.</p>
					<div class="table-container">
						<table class="table">
							<thead>
								<tr>
									<th>Champ</th>
									<th>Type</th>
									<th>Contraintes</th>
									<th>Description</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>id</td>
									<td>INT</td>
									<td>PRIMARY KEY, AUTO_INCREMENT</td>
									<td>Identifiant unique du groupe</td>
								</tr>
								<tr>
									<td>nom</td>
									<td>VARCHAR(150)</td>
									<td>UNIQUE, NOT NULL</td>
									<td>Nom du groupe</td>
								</tr>
								<tr>
									<td>type</td>
									<td>VARCHAR(20)</td>
									<td>NOT NULL, DEFAULT 'groupe'</td>
									<td>Type de groupe (groupe / prive)</td>
								</tr>
								<tr>
									<td>cree_par</td>
									<td>INT</td>
									<td>FK clients(id)</td>
									<td>Cr√©ateur du groupe</td>
								</tr>
								<tr>
									<td>cree_le</td>
									<td>TIMESTAMP</td>
									<td>DEFAULT CURRENT_TIMESTAMP</td>
									<td>Date de cr√©ation du groupe</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>

				<div class="card mb-4">
					<h3>üí¨ Table messages</h3>
					<p>Stocke tous les messages envoy√©s dans chaque groupe.</p>
					<div class="table-container">
						<table class="table">
							<thead>
								<tr>
									<th>Champ</th>
									<th>Type</th>
									<th>Contraintes</th>
									<th>Description</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>id</td>
									<td>INT</td>
									<td>PRIMARY KEY, AUTO_INCREMENT</td>
									<td>Identifiant unique du message</td>
								</tr>
								<tr>
									<td>groupe_id</td>
									<td>INT</td>
									<td>FK groupes(id), NOT NULL</td>
									<td>Groupe destinataire</td>
								</tr>
								<tr>
									<td>expediteur_id</td>
									<td>INT</td>
									<td>FK clients(id), NOT NULL</td>
									<td>Client ayant envoy√© le message</td>
								</tr>
								<tr>
									<td>contenu</td>
									<td>TEXT</td>
									<td>NOT NULL</td>
									<td>Contenu du message</td>
								</tr>
								<tr>
									<td>envoye_le</td>
									<td>TIMESTAMP</td>
									<td>DEFAULT CURRENT_TIMESTAMP</td>
									<td>Date/heure d'envoi</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>

				<div class="card">
					<h3>üîó Table membres_groupes</h3>
					<p>Fait le lien entre les clients et les groupes (relation N:N) avec un r√¥le.</p>
					<div class="table-container">
						<table class="table">
							<thead>
								<tr>
									<th>Champ</th>
									<th>Type</th>
									<th>Contraintes</th>
									<th>Description</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>id</td>
									<td>INT</td>
									<td>PRIMARY KEY, AUTO_INCREMENT</td>
									<td>Identifiant de l'enregistrement</td>
								</tr>
								<tr>
									<td>groupe_id</td>
									<td>INT</td>
									<td>FK groupes(id), NOT NULL</td>
									<td>Groupe concern√©</td>
								</tr>
								<tr>
									<td>client_id</td>
									<td>INT</td>
									<td>FK clients(id), NOT NULL</td>
									<td>Client membre du groupe</td>
								</tr>
								<tr>
									<td>role</td>
									<td>VARCHAR(50)</td>
									<td>DEFAULT 'membre'</td>
									<td>R√¥le dans le groupe</td>
								</tr>
								<tr>
									<td>date_adhesion</td>
									<td>TIMESTAMP</td>
									<td>DEFAULT CURRENT_TIMESTAMP</td>
									<td>Date d'adh√©sion</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</section>

		<!-- Diagramme relationnel -->
		<section class="section section-alt">
			<div class="container">
				<div class="section-title">
					<h2>Diagramme relationnel</h2>
					<p>Visualisation des relations entre les tables principales de MateZone</p>
				</div>

				<div class="architecture-diagram">
					<div class="grid grid-2">
						<div class="layer layer-db">
							<h4>üë§ CLIENTS</h4>
							<p>id (PK), pseudo (UNIQUE), mdp, custom_img_data, default_image_id (FK), created_at</p>
						</div>

						<div class="layer layer-server">
							<h4>üè¢ GROUPES</h4>
							<p>id (PK), nom (UNIQUE), type, cree_par (FK client), cree_le</p>
						</div>
					</div>

					<div style="text-align: center; margin: 1rem 0; font-size: 2rem;">‚ÜïÔ∏è</div>

					<div class="layer layer-common">
						<h4>üîó MEMBRES_GROUPES</h4>
						<p>groupe_id (FK), client_id (FK), role, date_adhesion</p>
					</div>

					<div style="text-align: center; margin: 1rem 0; font-size: 2rem;">‚ÜïÔ∏è</div>

					<div class="layer layer-client">
						<h4>üí¨ MESSAGES</h4>
						<p>id (PK), groupe_id (FK), expediteur_id (FK client), contenu, envoye_le</p>
					</div>

					<div style="text-align: center; margin: 1rem 0; font-size: 2rem;">‚ÜïÔ∏è</div>

					<div class="layer layer-db">
						<h4>üñºÔ∏è DEFAULT_IMAGES</h4>
						<p>id (PK), nom (UNIQUE), img_data, created_at</p>
					</div>
				</div>

				<div class="alert alert-info mt-4">
					<strong>Relations cl√©s :</strong>
					<ul style="text-align: left; margin-top: 1rem;">
						<li>Un client peut cr√©er plusieurs groupes (1:N via groupes.cree_par)</li>
						<li>Un client peut appartenir √† plusieurs groupes (N:M via membres_groupes)</li>
						<li>Un groupe contient plusieurs messages (1:N via messages.groupe_id)</li>
						<li>Un client peut envoyer plusieurs messages (1:N via messages.expediteur_id)</li>
						<li>Plusieurs clients peuvent partager la m√™me image par d√©faut (1:N via default_image_id)</li>
					</ul>
				</div>
			</div>
		</section>

		<!-- Op√©rations CRUD -->
		<section class="section">
			<div class="container">
				<div class="section-title">
					<h2>Op√©rations principales</h2>
					<p>Exemples de requ√™tes SQL typiques utilis√©es par MateZone sur les tables r√©elles.</p>
				</div>

				<div class="grid grid-2">
					<div class="card">
						<h3>üë§ Gestion des clients</h3>

						<h4>Inscription d'un nouveau client :</h4>
						<div class="code-block">
							<pre>INSERT INTO clients (pseudo, mdp, default_image_id)
VALUES ('nouveau_user', 'hash_password', 1);</pre>
						</div>

						<h4>Authentification (r√©cup√©ration du hash) :</h4>
						<div class="code-block">
							<pre>SELECT id, mdp
FROM clients
WHERE pseudo = ?;</pre>
						</div>

						<h4>Changer l'image de profil personnalis√©e :</h4>
						<div class="code-block">
							<pre>UPDATE clients
SET custom_img_data = ?
WHERE id = ?;</pre>
						</div>
					</div>

					<div class="card">
						<h3>üí¨ Gestion des messages</h3>

						<h4>Envoi d'un nouveau message :</h4>
						<div class="code-block">
							<pre>INSERT INTO messages (groupe_id, expediteur_id, contenu)
VALUES (?, ?, ?);</pre>
						</div>

						<h4>R√©cup√©ration de l'historique :</h4>
						<div class="code-block">
							<pre>SELECT m.contenu, m.envoye_le, c.pseudo
FROM messages m
JOIN clients c ON m.expediteur_id = c.id
WHERE m.groupe_id = ?
ORDER BY m.envoye_le DESC
LIMIT 50;</pre>
						</div>

						<h4>Recherche de messages :</h4>
						<div class="code-block">
							<pre>SELECT m.*, c.pseudo
FROM messages m
JOIN clients c ON m.expediteur_id = c.id
WHERE m.contenu LIKE ?
AND m.groupe_id = ?;</pre>
						</div>
					</div>

					<div class="card">
						<h3>üè¢ Gestion des groupes</h3>

						<h4>Cr√©ation d'un groupe :</h4>
						<div class="code-block">
							<pre>INSERT INTO groupes (nom, type, cree_par)
VALUES (?, 'groupe', ?);</pre>
						</div>

						<h4>Liste des groupes d'un client :</h4>
						<div class="code-block">
							<pre>SELECT g.id, g.nom, g.type, mg.role
FROM groupes g
JOIN membres_groupes mg ON g.id = mg.groupe_id
WHERE mg.client_id = ?;</pre>
						</div>

						<h4>Ajout d'un membre dans un groupe :</h4>
						<div class="code-block">
							<pre>INSERT INTO membres_groupes (groupe_id, client_id, role)
VALUES (?, ?, 'membre');</pre>
						</div>
					</div>

					<div class="card">
						<h3>üìä Statistiques et rapports</h3>

						<h4>Nombre de messages par canal :</h4>
						<div class="code-block">
							<pre>SELECT g.nom, COUNT(m.id) AS nb_messages
FROM groupes g
LEFT JOIN messages m ON g.id = m.groupe_id
GROUP BY g.id, g.nom;</pre>
						</div>

						<h4>Utilisateurs les plus actifs :</h4>
						<div class="code-block">
							<pre>SELECT c.pseudo, COUNT(m.id) AS nb_messages
FROM clients c
JOIN messages m ON c.id = m.expediteur_id
GROUP BY c.id, c.pseudo
ORDER BY nb_messages DESC
LIMIT 10;</pre>
						</div>

						<h4>Activit√© r√©cente :</h4>
						<div class="code-block">
							<pre>SELECT DATE(envoye_le) AS jour, COUNT(*) AS nb_messages
FROM messages
WHERE envoye_le >= DATE_SUB(NOW(), INTERVAL 7 DAY)
GROUP BY DATE(envoye_le)
ORDER BY jour;</pre>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Performance et optimisation -->
		<section class="section section-alt">
			<div class="container">
				<div class="section-title">
					<h2>Performance et optimisation</h2>
					<p>Strat√©gies mises en place pour optimiser les performances et garantir la coh√©rence des donn√©es.
					</p>
				</div>

				<div class="grid grid-3">
					<div class="card">
						<span class="card-icon">‚ö°</span>
						<h3>Index optimis√©s</h3>
						<ul style="text-align: left;">
							<li><strong>messages.groupe_id</strong> (idx_messages_groupe) - R√©cup√©ration rapide par
								groupe</li>
							<li><strong>messages.expediteur_id</strong> (idx_messages_expediteur) - R√©cup√©ration par
								exp√©diteur</li>
							<li><strong>clients.pseudo</strong> - Index implicite via contrainte UNIQUE</li>
							<li><strong>membres_groupes(groupe_id, client_id)</strong> - Index implicite via contrainte
								UNIQUE</li>
						</ul>

						<div class="code-block mt-3">
							<pre>-- Index explicites d√©finis dans MateZone.sql
CREATE INDEX idx_messages_groupe
ON messages(groupe_id);

CREATE INDEX idx_messages_expediteur
ON messages(expediteur_id);

-- Index implicites cr√©√©s par les contraintes UNIQUE
-- UNIQUE(pseudo) sur clients.pseudo
-- UNIQUE(groupe_id, client_id) sur membres_groupes</pre>
						</div>
					</div>

					<div class="card">
						<span class="card-icon">üîí</span>
						<h3>Contraintes d'int√©grit√©</h3>
						<ul style="text-align: left;">
							<li><strong>Cl√©s √©trang√®res</strong> - Coh√©rence r√©f√©rentielle</li>
							<li><strong>Contraintes UNIQUE</strong> - Pas de doublons</li>
							<li><strong>Contraintes NOT NULL</strong> - Donn√©es obligatoires</li>
							<li><strong>Contraintes CHECK</strong> - Validation m√©tier</li>
						</ul>

						<div class="alert alert-info mt-3">
							<strong>Avantage :</strong> Garantit la coh√©rence des donn√©es au niveau de la base,
							ind√©pendamment de l'application.
						</div>
					</div>

					<div class="card">
						<span class="card-icon">üßπ</span>
						<h3>Maintenance automatique</h3>
						<ul style="text-align: left;">
							<li><strong>CASCADE</strong> - Suppression en cascade</li>
							<li><strong>Archivage</strong> - Messages anciens</li>
							<li><strong>Nettoyage</strong> - Sessions expir√©es</li>
							<li><strong>Statistiques</strong> - Mise √† jour auto</li>
						</ul>

						<div class="alert alert-success mt-3">
							<strong>R√©sultat :</strong> Base de donn√©es auto-entretenue avec performance constante.
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>

	<!-- Footer -->
	<footer class="footer">
		<div class="container">
			<div class="footer-content">
				<div class="footer-section">
					<h3>MateZone</h3>
					<p>Application de messagerie instantan√©e d√©velopp√©e en Java avec une architecture moderne et
						s√©curis√©e.</p>
				</div>

				<div class="footer-section">
					<h3>Navigation</h3>
					<p><a href="index.html">Accueil</a></p>
					<p><a href="architecture.html">Architecture</a></p>
					<p><a href="database.html">Base de donn√©es</a></p>
					<p><a href="guide.html">Guide d'utilisation</a></p>
				</div>

				<div class="footer-section">
					<h3>Ressources</h3>
					<p><a href="documentation.html">Documentation</a></p>
					<p><a href="../docs/index.html" target="_blank">Javadoc</a></p>
					<p><a href="https://github.com/Joshua-Hermilly/MateZone" target="_blank">Code source</a></p>
				</div>

				<div class="footer-section">
					<h3>Contact</h3>
					<p><a href="contact.html">Nous contacter</a></p>
					<p><a href="https://github.com/Joshua-Hermilly" target="_blank">GitHub</a></p>
				</div>
			</div>

			<div class="footer-bottom">
				<p>&copy; 2025 MateZone Team. Projet √©ducatif - Joshua Hermilly & Donovan Pr√©vost</p>
			</div>
		</div>
	</footer>

	<script src="js/script.js"></script>
</body>

</html>